<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript">
//定义为全局变量
 var websocket
 function conn(){
	 //创建websocket对象   创建即连接
	 var id=sname.value;
	 
	 websocket =new WebSocket("ws://localhost/websocket/" + id);//对应MywebSocket的地址
	 //连接失败的回调方法
	 websocket.onerror =function(){
		
	 };
	 //连接成功的回调方法         event是形参，代表的是MessageEvent 事件对象
	 websocket.onopen =function(event){
		 //网页小弹窗
		 alert("connection success!");
		 //控制台消息
		 console.info(event);
	 }
	 //接收到消息的回调方法
	 websocket.onmessage=function(event){
		 console.info(event);
		 alert(event.data);
		
	 }
	 //关闭连接的回调方法
	 websocket.onclose=function(){
		 
	 }
 }
 //关闭连接
 function closeWebSocket(){
	 websocket.close();
 }
 //发送消息
 function send(){
	 var msg=content.value;
	 var id=tname.value;
	 websocket.send(id+":"+msg);
 }


</script>


</head>
<body>
发送者：<input id="sname"><br>
接受者：<input id="tname"><br>
内容：<input id="content"><br>
<button onclick="conn()">连接</button>
<button onclick="send()">发送</button>

</body>
</html>